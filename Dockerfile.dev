# Development Dockerfile with hot reload and debugging
FROM rust:1.75

# Install development dependencies
RUN apt-get update && apt-get install -y \
    pkg-config \
    libssl-dev \
    git \
    curl \
    vim \
    tmux \
    && rm -rf /var/lib/apt/lists/*

# Install development tools
RUN rustup component add rustfmt clippy rust-analyzer

# Install cargo-watch for hot reload
RUN cargo install cargo-watch

# Install Foundry
RUN curl -L https://foundry.paradigm.xyz | bash && \
    /root/.foundry/bin/foundryup

# Add foundry to PATH
ENV PATH="/root/.foundry/bin:${PATH}"

# Create app directory
WORKDIR /workspace

# Mount point for source code (use volumes)
VOLUME /workspace

# Expose any ports if needed (for future web UI)
EXPOSE 8545

# Keep container running for development
CMD ["bash"]